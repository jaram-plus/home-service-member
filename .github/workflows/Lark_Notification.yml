name: Lark Notification

on:
  push:
  pull_request:
    types: [opened, reopened, closed]
  issues:
    types: [opened, reopened, closed]
  issue_comment:
    types: [created]
  pull_request_review_comment:
    types: [created]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      # 1. Push ì•Œë¦¼ (íŒŒë€ìƒ‰ í—¤ë”)
      - name: Lark Push Notification
        if: github.event_name == 'push'
        uses: Nghi-NV/lark-message-action@v1
        with:
          lark-bot-notify-webhook: ${{ secrets.LARK_WEBHOOK }}
          title: "ğŸ”¨ Push: ${{ github.repository }}"
          content: "${{ github.actor }}ë‹˜ì´ ì½”ë“œë¥¼ ì˜¬ë ¸ìŠµë‹ˆë‹¤.\në©”ì‹œì§€: ${{ github.event.head_commit.message }}\nğŸ‘‰ [ë°”ë¡œê°€ê¸°](https://github.com/${{ github.repository }}/commit/${{ github.sha }})"
          header-color: "blue"

      # 2. PR ì•Œë¦¼ (ë³´ë¼ìƒ‰ í—¤ë”)
      - name: Lark PR Notification
        if: github.event_name == 'pull_request'
        uses: Nghi-NV/lark-message-action@v1
        with:
          lark-bot-notify-webhook: ${{ secrets.LARK_WEBHOOK }}
          title: "ğŸ”€ PR ${{ github.event.action }}: ${{ github.event.pull_request.title }}"
          content: "ì‘ì„±ì: ${{ github.actor }}\nìƒíƒœ: ${{ github.event.pull_request.state }}\nğŸ‘‰ [PR ë³´ê¸°](${{ github.event.pull_request.html_url }})"
          header-color: "purple"

      # 3. Issue ì•Œë¦¼ (ì£¼í™©ìƒ‰ í—¤ë”)
      - name: Lark Issue Notification
        if: github.event_name == 'issues'
        uses: Nghi-NV/lark-message-action@v1
        with:
          lark-bot-notify-webhook: ${{ secrets.LARK_WEBHOOK }}
          title: "â— Issue ${{ github.event.action }}: ${{ github.event.issue.title }}"
          content: "ì‘ì„±ì: ${{ github.actor }}\nğŸ‘‰ [ì´ìŠˆ ë³´ê¸°](${{ github.event.issue.html_url }})"
          header-color: "orange"

      # 4. ëŒ“ê¸€ ì•Œë¦¼ (ì´ˆë¡ìƒ‰ í—¤ë”)
      - name: Lark Comment Notification
        if: github.event_name == 'issue_comment' || github.event_name == 'pull_request_review_comment'
        uses: Nghi-NV/lark-message-action@v1
        with:
          lark-bot-notify-webhook: ${{ secrets.LARK_WEBHOOK }}
          title: "ğŸ’¬ ìƒˆë¡œìš´ ëŒ“ê¸€ì´ ë‹¬ë ¸ìŠµë‹ˆë‹¤"
          content: "ì‘ì„±ì: ${{ github.actor }}\në‚´ìš©: ${{ github.event.comment.body }}\nğŸ‘‰ [ëŒ“ê¸€ ë³´ê¸°](${{ github.event.comment.html_url }})"
          header-color: "green"
