name: Lark Notification

on:
  push:
  pull_request:
    types: [opened, reopened, closed]
  issues:
    types: [opened, reopened, closed]
  issue_comment:
    types: [created]
  pull_request_review_comment:
    types: [created]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      # 1. Push ì´ë²¤íŠ¸ ì²˜ë¦¬
      - name: Notify Push
        if: github.event_name == 'push'
        uses: yakumioto/lark-notification-action@v1
        with:
          bot_url: ${{ secrets.LARK_WEBHOOK }}
          title: "ğŸ”¨ ìƒˆë¡œìš´ ì»¤ë°‹ (Push)"
          content: |
            ë ˆí¬ì§€í† ë¦¬: ${{ github.repository }}
            ë¸Œëœì¹˜: ${{ github.ref_name }}
            ì‘ì„±ì: ${{ github.actor }}
            ë©”ì‹œì§€: ${{ github.event.head_commit.message }}
            ğŸ‘‰ ë§í¬: https://github.com/${{ github.repository }}/commit/${{ github.sha }}

      # 2. PR ì´ë²¤íŠ¸ ì²˜ë¦¬
      - name: Notify PR
        if: github.event_name == 'pull_request'
        uses: yakumioto/lark-notification-action@v1
        with:
          bot_url: ${{ secrets.LARK_WEBHOOK }}
          title: "ğŸ”€ Pull Request ${{ github.event.action }}"
          content: |
            ì œëª©: ${{ github.event.pull_request.title }}
            ì‘ì„±ì: ${{ github.actor }}
            ìƒíƒœ: ${{ github.event.pull_request.state }}
            ğŸ‘‰ ë§í¬: ${{ github.event.pull_request.html_url }}

      # 3. Issue ìƒì„±/ë‹«í˜ ì²˜ë¦¬
      - name: Notify Issue
        if: github.event_name == 'issues'
        uses: yakumioto/lark-notification-action@v1
        with:
          bot_url: ${{ secrets.LARK_WEBHOOK }}
          title: "â— Issue ${{ github.event.action }}"
          content: |
            ì œëª©: ${{ github.event.issue.title }}
            ì‘ì„±ì: ${{ github.actor }}
            ğŸ‘‰ ë§í¬: ${{ github.event.issue.html_url }}

      # 4. ëŒ“ê¸€(Comment) ì•Œë¦¼ ì²˜ë¦¬ (Issue & PR í†µí•©)
      - name: Notify Comment
        if: github.event_name == 'issue_comment' || github.event_name == 'pull_request_review_comment'
        uses: yakumioto/lark-notification-action@v1
        with:
          bot_url: ${{ secrets.LARK_WEBHOOK }}
          title: "ğŸ’¬ ìƒˆë¡œìš´ ëŒ“ê¸€ ë‹¬ë¦¼"
          content: |
            ê¸€ ì œëª©: ${{ github.event.issue.title || github.event.pull_request.title }}
            ì‘ì„±ì: ${{ github.actor }}
            ë‚´ìš©: ${{ github.event.comment.body }}
            ğŸ‘‰ ë§í¬: ${{ github.event.comment.html_url }}
